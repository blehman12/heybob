<% content_for :title, 'Join an Event' %>

<div style="padding: 20px 0 24px;">
  <h1 style="font-family:'Syne',sans-serif; font-size:24px; font-weight:800; letter-spacing:-0.02em;">
    Join an Event
  </h1>
  <p style="font-size:14px; color:rgba(255,255,255,0.45); margin-top:8px; line-height:1.5;">
    Register <%= @vendor.name %> as a vendor for an upcoming event.
  </p>
</div>

<% if @vendor_event.errors.any? %>
  <div class="vd-errors">
    <% @vendor_event.errors.full_messages.each do |msg| %>
      <p><%= msg %></p>
    <% end %>
  </div>
<% end %>

<%= form_with model: [:vendor, @vendor, @vendor_event] do |f| %>

  <div class="vd-form-section">
    <div class="vd-form-section__title">Event</div>

    <div class="vd-field">
      <%= f.label :event_id, 'Select Event', class: 'vd-label' %>
      <% if @available_events.any? %>
        <%= f.select :event_id,
                     @available_events.map { |e|
                       ["#{e.name}  Â·  #{e.event_date.strftime('%b %-d, %Y')}", e.id]
                     },
                     { include_blank: 'Choose an event...' },
                     class: "vd-input #{'is-invalid' if @vendor_event.errors[:event_id].any?}" %>
      <% else %>
        <div class="vd-card">
          <div class="vd-empty" style="padding: 24px;">
            <div class="vd-empty__icon">ðŸ“…</div>
            <p class="vd-empty__text">No upcoming events available.<br>Ask the organiser to add one.</p>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <% if @available_events.any? %>
    <div class="vd-form-section">
      <div class="vd-form-section__title">Booth Location <span style="font-weight:400; opacity:0.5;">(optional)</span></div>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <div class="vd-field">
          <label class="vd-label" for="booth_number">Booth #</label>
          <input type="text"
                 id="booth_number"
                 name="booth_number"
                 placeholder="247"
                 class="vd-input"
                 value="<%= params[:booth_number] %>">
        </div>
        <div class="vd-field">
          <label class="vd-label" for="hall">Hall / Section</label>
          <input type="text"
                 id="hall"
                 name="hall"
                 placeholder="Main Hall"
                 class="vd-input"
                 value="<%= params[:hall] %>">
        </div>
      </div>
      <p class="vd-hint">Shown to attendees so they can find you.</p>
    </div>

    <%= f.submit 'Register for Event', class: 'vd-btn vd-btn--full' %>
  <% end %>

<% end %>
